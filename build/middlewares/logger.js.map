{"version":3,"sources":["../../backend/middlewares/logger.js"],"names":["getActualRequestDurationInMilliseconds","fs","require","logger","req","res","next","method","url","status","statusCode","start","process","hrtime","durationInMilliseconds","log","toLocaleString","appendFile","err","console"],"mappings":"AAAA;AACA,SAASA,sCAAT,QAAuD,SAAvD;;AAEA,MAAMC,KAAKC,QAAQ,IAAR,CAAX;;AAEA,MAAMC,SAAS,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACjC;AACA,QAAM,EAAEC,MAAF,KAAaH,GAAnB;AACA,QAAM,EAAEI,GAAF,KAAUJ,GAAhB;AACA,QAAMK,SAASJ,IAAIK,UAAnB;AACA,QAAMC,QAAQC,QAAQC,MAAR,EAAd;AACA,QAAMC,yBAAyBd,uCAAuCW,KAAvC,CAA/B;AACA,QAAMI,MAAO,GAAER,MAAO,OAAMC,GAAI,OAAMC,MAAO,OAAMK,uBAAuBE,cAAvB,EAAwC,QAA3F;AACA;;AAEAf,KAAGgB,UAAH,CAAc,kBAAd,EAAmC,GAAEF,GAAI,IAAzC,EAA+CG,GAAD,IAAS;AACrD,QAAIA,GAAJ,EAAS;AACPC,cAAQJ,GAAR,CAAYG,GAAZ;AACD;AACF,GAJD;AAKAZ;AACD,CAhBD;;AAkBA,eAAeH,MAAf","file":"logger.js","sourcesContent":["/* eslint-disable no-console */\nimport { getActualRequestDurationInMilliseconds } from '../util';\n\nconst fs = require('fs');\n\nconst logger = (req, res, next) => {\n  // GET /api/v1/on-covid-19 200 30 ms\n  const { method } = req;\n  const { url } = req;\n  const status = res.statusCode;\n  const start = process.hrtime();\n  const durationInMilliseconds = getActualRequestDurationInMilliseconds(start);\n  const log = `${method}\\t\\t${url}\\t\\t${status}\\t\\t${durationInMilliseconds.toLocaleString()}\\t\\tms`;\n  // console.log(log);\n\n  fs.appendFile('request_logs.txt', `${log}\\n`, (err) => {\n    if (err) {\n      console.log(err);\n    }\n  });\n  next();\n};\n\nexport default logger;\n"]}